<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Past Workouts — elev8</title>
    <style>
      :root {
        --bg: #0f0f10;
        --panel: #161618;
        --accent: #c7ff00;
        --text: #ffffff;
        --muted: #9c9c9c;
        --outline: #2a2a2c;
        --success: #4cff4c;
      }

      body {
        background: var(--bg);
        color: var(--text);
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 0;
        min-height: 100vh;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.2rem;
        background: var(--panel);
        position: sticky;
        top: 0;
        z-index: 10;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      }

      header button {
        background: none;
        border: none;
        color: var(--accent);
        font-size: 1.3rem;
        cursor: pointer;
      }

      header h1 {
        font-size: 1.2rem;
        font-weight: 700;
        margin: 0;
      }

      .container {
        padding: 1rem;
        max-width: 700px;
        margin: auto;
      }

      .workout-card {
        background: var(--panel);
        border-radius: 16px;
        padding: 1rem;
        margin-bottom: 1rem;
        box-shadow: 0 5px 18px rgba(0, 0, 0, 0.4);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .workout-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
      }

      .workout-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      .workout-header h2 {
        font-size: 1.1rem;
        margin: 0;
      }

      .workout-meta {
        font-size: 0.8rem;
        color: var(--muted);
      }

      .workout-details {
        margin-top: 1rem;
        display: none;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .exercise-row {
        display: flex;
        justify-content: space-between;
        padding: 0.6rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .exercise-name {
        font-weight: 500;
        font-size: 0.95rem;
      }

      .exercise-weight {
        color: var(--accent);
        font-weight: 700;
      }

      .pr-badge {
        background: var(--success);
        color: #000;
        padding: 0.2rem 0.5rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 700;
        margin-left: 0.4rem;
      }

      .duration {
        margin-top: 0.8rem;
        font-size: 0.9rem;
        color: var(--muted);
      }

      .delete-btn {
        margin-top: 0.8rem;
        background: #ff4444;
        color: #fff;
        border: none;
        width: 100%;
        padding: 0.6rem;
        border-radius: 10px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        transition: background 0.2s ease;
      }

      .delete-btn:hover {
        background: #ff3030;
      }

      .no-workouts {
        text-align: center;
        margin-top: 3rem;
        color: var(--muted);
        font-size: 1rem;
      }
    </style>
  </head>
  <body>
    <header>
      <button onclick="location.href='workouts.html'">←</button>
      <h1>Past Workouts</h1>
      <div style="width: 25px"></div>
    </header>

    <div class="container">
      <div id="workoutsContainer" class="workouts"></div>
    </div>

    <script>
      const workoutsContainer = document.getElementById("workoutsContainer");
      const pastWorkouts = JSON.parse(
        localStorage.getItem("completedWorkouts") || "[]"
      );

      function formatDuration(seconds) {
        const mins = String(Math.floor(seconds / 60)).padStart(2, "0");
        const secs = String(seconds % 60).padStart(2, "0");
        return `${mins}:${secs}`;
      }

      function renderWorkouts() {
        workoutsContainer.innerHTML = "";
        if (!pastWorkouts.length) {
          workoutsContainer.innerHTML = `<p class="no-workouts">No past workouts yet.</p>`;
          return;
        }

        pastWorkouts.forEach((w, idx) => {
          const card = document.createElement("div");
          card.className = "workout-card";

          const header = document.createElement("div");
          header.className = "workout-header";
          header.innerHTML = `
            <h2>${w.name || "Unnamed Workout"}</h2>
            <span class="workout-meta">${new Date(
              w.date
            ).toLocaleDateString()}</span>
          `;

          const details = document.createElement("div");
          details.className = "workout-details";

          w.exercises?.forEach((ex) => {
            const exRow = document.createElement("div");
            exRow.className = "exercise-row";

            const pr = ex.pr ? `<span class="pr-badge">PR</span>` : "";
            exRow.innerHTML = `
              <span class="exercise-name">${ex.name} ${pr}</span>
              <span class="exercise-weight">${ex.weight || "-"}</span>
            `;
            details.appendChild(exRow);
          });

          const duration = document.createElement("div");
          duration.className = "duration";
          duration.textContent = `⏱ Duration: ${formatDuration(
            w.duration || 0
          )}`;
          details.appendChild(duration);

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "delete-btn";
          deleteBtn.textContent = "Delete Workout";
          deleteBtn.addEventListener("click", () => {
            if (confirm("Delete this workout?")) {
              pastWorkouts.splice(idx, 1);
              localStorage.setItem(
                "completedWorkouts",
                JSON.stringify(pastWorkouts)
              );
              renderWorkouts();
            }
          });
          details.appendChild(deleteBtn);

          header.addEventListener("click", () => {
            details.style.display =
              details.style.display === "block" ? "none" : "block";
          });

          card.appendChild(header);
          card.appendChild(details);
          workoutsContainer.appendChild(card);
        });
      }

      renderWorkouts();
    </script>
  </body>
</html>
